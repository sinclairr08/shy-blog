# AWS 실습: EC2와 RDS 연결

## 선행 포스트

- [AWS 실습: EC2 시작](./2022-11-14.md)
- [AWS 실습: EC2를 SSH로 연결](./2022-11-16.md)
- [AWS 실습: RDS 시작](./2022-11-17.md)

## AWS EC2에서 RDS 접속

1. 다음과 같은 이름의 EC2 생성.

![](./imgs/2022-11-18-1.png)

2. SSH 연결이 필요하므로 키 페어 선택.

![](./imgs/2022-11-18-2.png)

3. 보안 그룹을 새로 생성하며, 내 IP에서 SSH 연결이 가능하도록 설정.

![](./imgs/2022-11-18-3.png)

4. 인스턴스가 생성되면 새 RDS 데이터베이스 생성 창으로 이동하고, RDS 데이터베이스 생성 창도 클릭해서 열어 놓음.

![](./imgs/2022-11-18-4.png)

5. RDS 데이터베이스 생성 창에서 DB 인스턴스 식별자(이름), 마스터 사용자 이름, 마스터 암호 등을 설정.

![](./imgs/2022-11-18-5.png)

6. 연결 탭에서 "EC2 컴퓨팅 리소스에 연결"을 선택하고, 방금 생성한 EC2 인스턴스를 설정. VPC등이 자동으로 설정 됨.

![](./imgs/2022-11-18-6.png)

7. 서브넷 그룹 등이 자동으로 생성되고, 보안 그룹 역시 새로 생성을 누르면 자동으로 EC2와 연결할 수 있도록 생성해 줌.

![](./imgs/2022-11-18-7.png)

8. 초기 데이터베이스 이름을 지정하고 RDS 데이터베이스를 생성.

![](./imgs/2022-11-18-8.png)

9. 4번에서 열어둔 "RDS 데이터베이스 연결" 페이지로 이동. 방금 생성한 데이터베이스를 선택 후 "연결" 클릭.

![](./imgs/2022-11-18-9.png)

10. 자동으로 보안 그룹 및 연결을 위한 설정이 진행됨.

![](./imgs/2022-11-18-10.png)

11. RDS 데이터베이스의 엔드포인트를 기록해 둠.

![](./imgs/2022-11-18-11.png)

12. 로컬 CLI에서 SSH를 이용해 EC2에 접속. 이후 명령어를 입력해 관리자 권한으로 mysql 설치.

```
sudo su
yum update
yum install mysql
```

13. 11번에서 기록해 둔 엔드포인트 주소를 이용해 다음과 같이 mysql에 연결.

```
mysql -u admin -p -h {ENDPOINT}
```

![](./imgs/2022-11-18-12.png)

14. MySQL에 잘 연결되는 것을 확인 가능. 아래는 "show databases" 쿼리를 수행한 예시.

![](./imgs/2022-11-18-13.png)

## References

1. https://codesyun.tistory.com/303
